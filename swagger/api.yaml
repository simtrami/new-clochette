openapi: 3.0.0
info:
  title: Clochette Resources
  description: API for the Clochette AIO Student Cafeteria software project
  license:
    name: GPLv3
    url: https://www.gnu.org/licenses/gpl-3.0.txt
  version: 1.0.0
servers:
- url: https://virtserver.swaggerhub.com/Simtrami/clochette/1.0.0
  description: SwaggerHub API Auto Mocking
tags:
- name: barrel
  description: Operation on barrels
- name: bottle
  description: Operation on bottles
- name: bundle
  description: Operation on article bundles
- name: contact
  description: Operation on contacts
- name: customer
  description: Operation on customers
- name: food
  description: Operation on food articles
- name: other
  description: Operation on other articles
- name: paymentMethod
  description: Operation on payment methods
- name: price
  description: Operation on prices
- name: supplier
  description: Operation on suppliers
- name: transaction
  description: Operation on transactions
- name: user
  description: Operation on users
paths:
  /barrels/:
    get:
      tags:
      - barrel
      summary: Paginated list of barrels
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /bottles/:
    get:
      tags:
      - bottle
      summary: Paginated list of bottles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_1'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /bundles/:
    get:
      tags:
      - bundle
      summary: Paginated list of bundles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_2'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /contacts/:
    get:
      tags:
      - contact
      summary: Paginated list of contacts
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_3'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /customers/:
    get:
      tags:
      - customer
      summary: Paginated list of customers
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_4'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /food/:
    get:
      tags:
      - food
      summary: Paginated list of food
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_5'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /others/:
    get:
      tags:
      - other
      summary: Paginated list of other articles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_6'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /payment-methods/:
    get:
      tags:
      - paymentMethod
      summary: Paginated list of payment methods
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_7'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /prices/:
    get:
      tags:
      - price
      summary: Paginated list of prices
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_8'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /suppliers/:
    get:
      tags:
      - supplier
      summary: Paginated list of suppliers
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_9'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /transactions/:
    get:
      tags:
      - transaction
      summary: Paginated list of transactions
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_10'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /transactions/{id}:
    get:
      tags:
      - transaction
      summary: Get specified transaction
      parameters:
      - name: id
        in: path
        description: id of the requested resource
        required: true
        style: simple
        explode: false
        schema:
          minimum: 1
          type: integer
          format: int64
        example: 1
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_11'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /users/:
    get:
      tags:
      - user
      summary: Paginated list of users
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_12'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /users/{id}:
    get:
      tags:
      - user
      summary: Get specified user
      parameters:
      - name: id
        in: path
        description: id of the requested resource
        required: true
        style: simple
        explode: false
        schema:
          minimum: 1
          type: integer
          format: int64
        example: 1
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_13'
        "404":
          description: Non existing resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_404'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  schemas:
    Barrel:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Korun On Berg
        quantity:
          minimum: 10
          type: integer
        unitPrice:
          minimum: 0
          type: number
          description: Of the entire barrel
          example: 120
        volume:
          minimum: 0
          type: number
          description: In metric litre
          example: 30
        coupler:
          type: string
          nullable: true
          example: M
          enum:
          - A
          - D
          - G
          - M
          - S
          - U
        abv:
          type: number
          nullable: true
          example: 4.2
        ibu:
          type: number
          nullable: true
          example: 4
        variety:
          type: string
          nullable: true
          example: Euro Pale Lager
        value:
          minimum: 0
          type: number
          writeOnly: true
          example: 3
        secondValue:
          minimum: 0
          type: number
          nullable: true
          writeOnly: true
          example: 2
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Bottle:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Dunk
        quantity:
          minimum: 0
          type: integer
          example: 10
        unitPrice:
          minimum: 0
          type: number
          example: 1.5
        volume:
          minimum: 0
          type: number
          description: In metric centilitre
          example: 33
        isReturnable:
          type: boolean
          description: Whether there is a deposit for the bottle
          default: false
        abv:
          type: number
          nullable: true
          example: 5.6
        ibu:
          type: number
          nullable: true
          example: 35
        value:
          minimum: 0
          type: number
          writeOnly: true
          example: 2.5
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Bundle:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Pint and peanuts
        quantity:
          minimum: 0
          type: integer
          example: 10
        value:
          minimum: 0
          type: number
          writeOnly: true
          example: 4
    Contact:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        firstName:
          type: string
          example: Jane
        lastName:
          type: string
          example: Contact
        phone:
          type: string
          nullable: true
          example: "123456789"
        email:
          type: string
          format: email
          nullable: true
          example: jane.contact@supplier.com
        role:
          type: string
          example: Truck driver
        notes:
          type: string
          nullable: true
          example: Loves apples
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Customer:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        firstName:
          type: string
          example: Jane
        lastName:
          type: string
          example: Customer
        nickname:
          maxLength: 100
          type: string
          example: Happy Feet
        balance:
          type: number
          default: 0
        isStaff:
          type: boolean
          default: false
    Food:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Candy bar
        quantity:
          minimum: 0
          type: integer
          example: 10
        unitPrice:
          minimum: 0
          type: number
          example: 1.5
        isBulk:
          type: boolean
          default: false
        value:
          minimum: 0
          type: number
          writeOnly: true
          example: 2
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Other:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Green hat
        quantity:
          minimum: 0
          type: integer
          example: 10
        unitPrice:
          minimum: 0
          type: number
          example: 1
        description:
          type: string
          nullable: true
          example: Purchasable goodie for the St Patrick's day event
        value:
          minimum: 0
          type: number
          writeOnly: true
          example: 1.5
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    PaymentMethod:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Cash
        needsCashDrawer:
          type: boolean
          default: false
        iconName:
          type: string
          nullable: true
          example: coin
        parameters:
          type: object
          description: Additional properties for custom use-cases
          nullable: true
    Price:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        value:
          minimum: 0
          type: number
          example: 3
        secondValue:
          minimum: 0
          type: number
          description: For smaller variant of the same article (eg. half a pint)
          nullable: true
          example: 2
        isActive:
          type: boolean
          default: true
    Supplier:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          type: string
          example: Jane Supplier
        description:
          type: string
          example: Nice people
        address:
          type: string
          nullable: true
          example: 1 Foo Street, 1234 Bar
        phone:
          type: string
          nullable: true
          example: "0123456789"
        email:
          type: string
          format: email
          nullable: true
        supplierSince:
          type: string
          format: date
          nullable: true
    Transaction:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        value:
          minimum: 0
          type: number
          example: 1.5
        comment:
          type: string
          nullable: true
          example: This is awesome!
        user_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
        customer_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
        payment_method_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        username:
          type: string
          example: user
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          writeOnly: true
          example: secret
        passwordConfirmation:
          type: string
          format: password
          writeOnly: true
          example: secret
        customer_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Links:
      type: object
      properties:
        first:
          type: string
          description: URL to the first page of the list
          format: url
          example: http://example.com/resources?page=1
        last:
          type: string
          description: URL to the last page of the list
          format: url
          example: http://example.com/resources?page=3
        prev:
          type: string
          description: URL to the previous page of the list
          format: url
          nullable: true
          example: http://example.com/resources?page=1
        next:
          type: string
          description: URL to the next page of the list
          format: url
          nullable: true
          example: http://example.com/resources?page=3
      readOnly: true
    Meta:
      type: object
      properties:
        current_page:
          type: integer
          description: Active page number
          example: 2
        last_page:
          type: integer
          description: Last page number
          example: 3
        path:
          type: string
          description: URL to the endpoint
          format: url
          example: http://example.com/resources
        per_page:
          type: integer
          description: Number of resources per page
          example: 10
        from:
          type: integer
          description: First resource index number available in this page
          nullable: true
          example: 11
        to:
          type: integer
          description: Last resource index number available in this page
          nullable: true
          example: 20
        total:
          type: integer
          description: Total number of resources
          example: 33
      readOnly: true
    Error:
      required:
      - message
      type: object
      properties:
        message:
          type: string
          readOnly: true
          default: An error occured.
      readOnly: true
    inline_response_200:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Barrel'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_1:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Bottle'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_2:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Bundle'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
                barrels:
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Barrel'
                      quantity:
                        minimum: 1
                        type: integer
                bottles:
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Bottle'
                      quantity:
                        minimum: 1
                        type: integer
                food:
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Food'
                      quantity:
                        minimum: 1
                        type: integer
                others:
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Other'
                      quantity:
                        minimum: 1
                        type: integer
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_3:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Contact'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_4:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Customer'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_5:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Food'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_6:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Other'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_7:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/PaymentMethod'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_8:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_9:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Supplier'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_10:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Transaction'
            - type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                customer:
                  $ref: '#/components/schemas/Customer'
                paymentMethod:
                  $ref: '#/components/schemas/PaymentMethod'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_11:
      allOf:
      - $ref: '#/components/schemas/Transaction'
      - type: object
        properties:
          user:
            $ref: '#/components/schemas/User'
          customer:
            $ref: '#/components/schemas/Customer'
          paymentMethod:
            $ref: '#/components/schemas/PaymentMethod'
          barrels:
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_11_barrels'
          bottles:
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_11_bottles'
          food:
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_11_food'
          others:
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_11_others'
          bundles:
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_11_bundles'
    inline_response_200_12:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/User'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_13:
      allOf:
      - $ref: '#/components/schemas/User'
      - type: object
        properties:
          customer:
            $ref: '#/components/schemas/Customer'
    inline_response_404:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          message:
            example: No query results for model User 47
    inline_response_200_11_barrels:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Barrel'
    inline_response_200_11_bottles:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Bottle'
    inline_response_200_11_food:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Food'
    inline_response_200_11_others:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Other'
    inline_response_200_11_bundles:
      properties:
        quantity:
          minimum: 1
          type: integer
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Bundle'
