openapi: 3.0.0
info:
  title: Clochette Resources
  description: API for the Clochette AIO Student Cafeteria software project
  license:
    name: GPLv3
    url: https://www.gnu.org/licenses/gpl-3.0.txt
  version: 1.0.0
servers:
- url: https://virtserver.swaggerhub.com/Simtrami/clochette/1.0.0
  description: SwaggerHub API Auto Mocking
tags:
- name: barrel
  description: Operation on barrels
- name: bottle
  description: Operation on bottles
- name: bundle
  description: Operation on article bundles
- name: contact
  description: Operation on contacts
- name: customer
  description: Operation on customers
- name: food
  description: Operation on food articles
- name: other
  description: Operation on other articles
- name: paymentMethod
  description: Operation on payment methods
- name: price
  description: Operation on prices
- name: supplier
  description: Operation on suppliers
- name: transaction
  description: Operation on transactions
- name: user
  description: Operation on users
paths:
  /barrels/:
    get:
      tags:
      - barrel
      summary: Paginated list of barrels
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_barrels_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /bottles/:
    get:
      tags:
      - bottle
      summary: Paginated list of bottles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_bottles_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /bundles/:
    get:
      tags:
      - bundle
      summary: Paginated list of bundles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_bundles_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /contacts/:
    get:
      tags:
      - contact
      summary: Paginated list of contacts
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_contact_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /customers/:
    get:
      tags:
      - customer
      summary: Paginated list of customers
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_customers_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /food/:
    get:
      tags:
      - food
      summary: Paginated list of food
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_food_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /others/:
    get:
      tags:
      - other
      summary: Paginated list of other articles
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_others_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /payment-methods/:
    get:
      tags:
      - paymentMethod
      summary: Paginated list of payment methods
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_payment-methods_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /prices/:
    get:
      tags:
      - price
      summary: Paginated list of prices
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_prices_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /suppliers/:
    get:
      tags:
      - supplier
      summary: Paginated list of suppliers
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_suppliers_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /transactions/:
    get:
      tags:
      - transaction
      summary: Paginated list of transactions
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_transactions_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /transactions/{id}:
    get:
      tags:
      - transaction
      summary: Get specified transaction
      parameters:
      - name: id
        in: path
        description: id of the requested resource
        required: true
        style: simple
        explode: false
        schema:
          minimum: 1
          type: integer
          format: int64
        example: 1
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_transactions_show'
        "404":
          description: Non existing resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundError'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /users/:
    get:
      tags:
      - user
      summary: Paginated list of users
      parameters:
      - name: page
        in: query
        description: The requested page number
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int32
        example: 2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_users_list'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
  /users/{id}:
    get:
      tags:
      - user
      summary: Get specified user
      parameters:
      - name: id
        in: path
        description: id of the requested resource
        required: true
        style: simple
        explode: false
        schema:
          minimum: 1
          type: integer
          format: int64
        example: 1
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_users_show'
        "404":
          description: Non existing resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundError'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalError'
components:
  schemas:
    Barrel:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Korun On Berg
        quantity:
          minimum: 10
          type: integer
          format: int32
        unitPrice:
          minimum: 0
          type: number
          description: Of the entire barrel
          format: float
          example: 120
        volume:
          minimum: 0
          type: number
          description: In metric litre
          format: float
          example: 30
        coupler:
          type: string
          nullable: true
          example: M
          enum:
          - A
          - D
          - G
          - M
          - S
          - U
        abv:
          type: number
          format: float
          nullable: true
          example: 4.2
        ibu:
          type: number
          format: float
          nullable: true
          example: 4
        value:
          minimum: 0
          type: number
          format: float
          writeOnly: true
          example: 3
        secondValue:
          minimum: 0
          type: number
          format: float
          nullable: true
          writeOnly: true
          example: 2
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Bottle:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Dunk
        quantity:
          minimum: 0
          type: integer
          format: int32
          example: 10
        unitPrice:
          minimum: 0
          type: number
          format: float
          example: 1.5
        volume:
          minimum: 0
          type: number
          description: In metric centilitre
          format: float
          example: 33
        isReturnable:
          type: boolean
          description: Whether there is a deposit for the bottle
          default: false
        abv:
          type: number
          format: float
          nullable: true
          example: 5.6
        ibu:
          type: number
          format: float
          nullable: true
          example: 35
        value:
          minimum: 0
          type: number
          format: float
          writeOnly: true
          example: 2.5
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Bundle:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Pint and peanuts
        quantity:
          minimum: 0
          type: integer
          format: int32
          example: 10
        value:
          minimum: 0
          type: number
          format: float
          writeOnly: true
          example: 4
    Contact:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        firstName:
          maxLength: 255
          type: string
          example: Jane
        lastName:
          maxLength: 255
          type: string
          example: Contact
        phone:
          maxLength: 12
          pattern: /^[+0-9][0-9]{9}[0-9]{0,2}$/
          type: string
          nullable: true
          example: "0123456789"
        email:
          type: string
          format: email
          nullable: true
          example: jane.contact@supplier.com
        role:
          type: string
          example: Truck driver
        notes:
          maxLength: 1000
          type: string
          nullable: true
          example: Loves apples
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Customer:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        firstName:
          maxLength: 255
          type: string
          example: Jane
        lastName:
          maxLength: 255
          type: string
          example: Customer
        nickname:
          maxLength: 100
          type: string
          example: Happy Feet
        balance:
          type: number
          format: float
          default: 0
        isStaff:
          type: boolean
          default: false
    Food:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Candy bar
        quantity:
          minimum: 0
          type: integer
          format: int32
          example: 10
        unitPrice:
          minimum: 0
          type: number
          format: float
          example: 1.5
        isBulk:
          type: boolean
          default: false
        value:
          minimum: 0
          type: number
          format: float
          writeOnly: true
          example: 2
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Other:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Green hat
        quantity:
          minimum: 0
          type: integer
          format: inr32
          example: 10
        unitPrice:
          minimum: 0
          type: number
          format: float
          example: 1
        description:
          maxLength: 255
          type: string
          nullable: true
          example: Purchasable goodie for the St Patrick's day event
        value:
          minimum: 0
          type: number
          format: float
          writeOnly: true
          example: 1.5
        supplier_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    PaymentMethod:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Cash
        debitCustomer:
          type: boolean
          default: false
        iconName:
          maxLength: 100
          type: string
          nullable: true
          example: coin
        parameters:
          type: object
          description: Additional properties for custom use-cases
          nullable: true
    Price:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        value:
          minimum: 0
          type: number
          format: float
          example: 3
        secondValue:
          minimum: 0
          type: number
          description: For smaller variant of the same article (eg. half a pint)
          format: float
          nullable: true
          example: 2
    Supplier:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        name:
          maxLength: 255
          type: string
          example: Jane Supplier
        notes:
          maxLength: 1000
          type: string
          example: Nice people
        address:
          type: string
          nullable: true
          example: 1 Foo Street, 1234 Bar
        phone:
          pattern: /^[+0-9][0-9]{9}[0-9]{0,2}$/
          type: string
          nullable: true
          example: "0123456789"
        email:
          type: string
          format: email
          nullable: true
        supplierSince:
          type: string
          format: date
          nullable: true
    Transaction:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        value:
          minimum: 0
          type: number
          format: float
          example: 1.5
        comment:
          maxLength: 255
          type: string
          nullable: true
          example: This is awesome!
        user_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
        customer_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
        payment_method_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
        username:
          maxLength: 255
          type: string
          example: user
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          writeOnly: true
          example: secret
        passwordConfirmation:
          type: string
          format: password
          writeOnly: true
          example: secret
        customer_id:
          type: integer
          format: int64
          writeOnly: true
          example: 1
    Links:
      type: object
      properties:
        first:
          type: string
          description: URL to the first page of the list
          format: url
          example: http://example.com/resources?page=1
        last:
          type: string
          description: URL to the last page of the list
          format: url
          example: http://example.com/resources?page=3
        prev:
          type: string
          description: URL to the previous page of the list
          format: url
          nullable: true
          example: http://example.com/resources?page=1
        next:
          type: string
          description: URL to the next page of the list
          format: url
          nullable: true
          example: http://example.com/resources?page=3
      additionalProperties: false
      readOnly: true
    Meta:
      type: object
      properties:
        current_page:
          type: integer
          description: Active page number
          format: int32
          example: 2
        last_page:
          type: integer
          description: Last page number
          format: int32
          example: 3
        path:
          type: string
          description: URL to the endpoint
          format: url
          example: http://example.com/resources
        per_page:
          type: integer
          description: Number of resources per page
          format: int32
          example: 10
        from:
          type: integer
          description: First resource index number available in this page
          format: int32
          nullable: true
          example: 11
        to:
          type: integer
          description: Last resource index number available in this page
          format: int32
          nullable: true
          example: 20
        total:
          type: integer
          description: Total number of resources
          format: int32
          example: 33
      readOnly: true
    InternalError:
      required:
      - message
      type: object
      properties:
        message:
          maxLength: 500
          type: string
          readOnly: true
          default: An error occured.
      readOnly: true
    NotFoundError:
      required:
      - message
      type: object
      properties:
        message:
          maxLength: 500
          type: string
          readOnly: true
          example: No query results for model ModelName QueriedID
          default: An error occured.
      readOnly: true
    inline_response_200_barrels_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Barrel'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_bottles_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Bottle'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_bundles_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Bundle'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
                barrels:
                  maxItems: 100
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Barrel'
                      quantity:
                        minimum: 1
                        type: integer
                        format: int32
                bottles:
                  maxItems: 100
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Bottle'
                      quantity:
                        minimum: 1
                        type: integer
                        format: int32
                food:
                  maxItems: 100
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Food'
                      quantity:
                        minimum: 1
                        type: integer
                        format: int32
                others:
                  maxItems: 100
                  type: array
                  nullable: true
                  items:
                    type: object
                    properties:
                      article:
                        $ref: '#/components/schemas/Other'
                      quantity:
                        minimum: 1
                        type: integer
                        format: int32
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_contact_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Contact'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_customers_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Customer'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_food_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Food'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_others_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Other'
            - type: object
              properties:
                price:
                  $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_payment-methods_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/PaymentMethod'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_prices_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Price'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_suppliers_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/Supplier'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_transactions_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            allOf:
            - $ref: '#/components/schemas/Transaction'
            - type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                customer:
                  $ref: '#/components/schemas/Customer'
                paymentMethod:
                  $ref: '#/components/schemas/PaymentMethod'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_transactions_show:
      allOf:
      - $ref: '#/components/schemas/Transaction'
      - type: object
        properties:
          user:
            $ref: '#/components/schemas/User'
          customer:
            $ref: '#/components/schemas/Customer'
          paymentMethod:
            $ref: '#/components/schemas/PaymentMethod'
          barrels:
            maxItems: 100
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_transactions_show_barrels'
          bottles:
            maxItems: 100
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_transactions_show_bottles'
          food:
            maxItems: 100
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_transactions_show_food'
          others:
            maxItems: 100
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_transactions_show_others'
          bundles:
            maxItems: 100
            type: array
            nullable: true
            items:
              $ref: '#/components/schemas/inline_response_200_transactions_show_bundles'
    inline_response_200_users_list:
      type: object
      properties:
        data:
          maxItems: 10
          type: array
          items:
            $ref: '#/components/schemas/User'
        links:
          $ref: '#/components/schemas/Links'
        meta:
          $ref: '#/components/schemas/Meta'
    inline_response_200_users_show:
      allOf:
      - $ref: '#/components/schemas/User'
      - type: object
        properties:
          customer:
            $ref: '#/components/schemas/Customer'
    inline_response_200_transactions_show_barrels:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
          format: int32
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Barrel'
    inline_response_200_transactions_show_bottles:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
          format: int32
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Bottle'
    inline_response_200_transactions_show_food:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
          format: int32
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Food'
    inline_response_200_transactions_show_others:
      type: object
      properties:
        quantity:
          minimum: 1
          type: integer
          format: int32
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Other'
    inline_response_200_transactions_show_bundles:
      properties:
        quantity:
          minimum: 1
          type: integer
          format: int32
        price:
          $ref: '#/components/schemas/Price'
        item:
          $ref: '#/components/schemas/Bundle'
